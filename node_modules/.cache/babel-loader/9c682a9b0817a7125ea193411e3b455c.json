{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if ('value' in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _get = function get(_x, _x2, _x3) {\n  var _again = true;\n\n  _function: while (_again) {\n    var object = _x,\n        property = _x2,\n        receiver = _x3;\n    _again = false;\n    if (object === null) object = Function.prototype;\n    var desc = Object.getOwnPropertyDescriptor(object, property);\n\n    if (desc === undefined) {\n      var parent = Object.getPrototypeOf(object);\n\n      if (parent === null) {\n        return undefined;\n      } else {\n        _x = parent;\n        _x2 = property;\n        _x3 = receiver;\n        _again = true;\n        desc = parent = undefined;\n        continue _function;\n      }\n    } else if ('value' in desc) {\n      return desc.value;\n    } else {\n      var getter = desc.get;\n\n      if (getter === undefined) {\n        return undefined;\n      }\n\n      return getter.call(receiver);\n    }\n  }\n};\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError('Cannot call a class as a function');\n  }\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== 'function' && superClass !== null) {\n    throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _asyncValidator = require('async-validator');\n\nvar _asyncValidator2 = _interopRequireDefault(_asyncValidator);\n\nvar _Validator = require('./Validator');\n\nvar _Validator2 = _interopRequireDefault(_Validator);\n\nvar _objectAssign = require('object-assign');\n\nvar _objectAssign2 = _interopRequireDefault(_objectAssign);\n\nvar _FieldMixin = require('./FieldMixin');\n\nvar _FieldMixin2 = _interopRequireDefault(_FieldMixin);\n\nvar actionId = 0;\n\nvar Validation = function (_React$Component) {\n  _inherits(Validation, _React$Component);\n\n  function Validation(props) {\n    var _this = this;\n\n    _classCallCheck(this, Validation);\n\n    _get(Object.getPrototypeOf(Validation.prototype), 'constructor', this).call(this, props);\n\n    this.validators = {};\n    ['attachValidator', 'detachValidator', 'onInputChange', 'onInputChangeSilently'].forEach(function (m) {\n      _this[m] = _this[m].bind(_this);\n    });\n  }\n\n  _createClass(Validation, [{\n    key: 'onInputChangeSilently',\n    value: function onInputChangeSilently(validator, value) {\n      var r = this.getValidateResult();\n      r.formData[validator.getName()] = value;\n      this.props.onValidate(r.status, r.formData);\n    }\n  }, {\n    key: 'onInputChange',\n    value: function onInputChange(validator, v, fn) {\n      var value = v;\n      var name = validator.getName();\n      var schema = this.getSchema(validator);\n      var rules = schema[name];\n      rules.forEach(function (rule, index) {\n        if (rule.transform) {\n          value = rule.transform(value);\n          var newRule = (0, _objectAssign2['default'])({}, rule);\n          newRule.transform = null;\n          rules[index] = newRule;\n        }\n      });\n      var values = {};\n      values[name] = value;\n      validator.errors = undefined;\n      validator.isValidating = true;\n      validator.dirty = true;\n      var currentActionId = actionId;\n      validator.actionId = currentActionId;\n      actionId++;\n      var result = this.getValidateResult();\n      result.formData[name] = value;\n      this.props.onValidate(result.status, result.formData);\n      var self = this;\n      new _asyncValidator2['default'](schema).validate(values, function (errors) {\n        var validators = self.validators; // in case component is unmount and remount\n\n        var nowValidator = validators[name]; // prevent concurrency call\n\n        if (nowValidator && nowValidator.actionId === currentActionId) {\n          validator.errors = errors;\n          validator.isValidating = false;\n          validator.dirty = false;\n          var r = self.getValidateResult();\n          r.formData[name] = value;\n          self.props.onValidate(r.status, r.formData);\n\n          if (fn) {\n            fn();\n          }\n        }\n      });\n    }\n  }, {\n    key: 'getSchema',\n    value: function getSchema(validator) {\n      var ret = {};\n      var rules = validator.props.rules;\n\n      if (Array.isArray(rules)) {\n        rules = rules.concat();\n      } else {\n        rules = [rules];\n      }\n\n      ret[validator.getName()] = rules;\n      return ret;\n    }\n  }, {\n    key: 'getValidateResult',\n    value: function getValidateResult() {\n      var formData = {};\n      var status = {};\n      var validators = this.validators;\n      Object.keys(validators).forEach(function (name) {\n        var validator = validators[name];\n        var errors = undefined;\n\n        if (validator.errors) {\n          errors = validator.errors.map(function (e) {\n            return e.message;\n          });\n        }\n\n        if (errors && errors.length === 0) {\n          errors = null;\n        }\n\n        status[name] = {\n          errors: errors,\n          isValidating: validator.isValidating\n        };\n        formData[name] = validator.getValue();\n      });\n      return {\n        formData: formData,\n        status: status\n      };\n    }\n  }, {\n    key: 'isValid',\n    value: function isValid() {\n      var result = this.getValidateResult().status;\n      return Object.keys(result).every(function (name) {\n        if (result[name].isValidating || result[name].errors) {\n          return false;\n        }\n\n        return true;\n      });\n    }\n  }, {\n    key: 'attachValidators',\n    value: function attachValidators(children) {\n      var self = this;\n\n      if (children) {\n        var _ret = function () {\n          // refer: React traverseAllChildrenImpl\n          // bug fix for react 0.13 @2015.07.02\n          // option should not have non-text children\n          // <option>11</option>\n          // React.Children.map(option.props.children,function(c){return c}) => {'.0':'11'}\n          var type = typeof children;\n\n          if (type === 'boolean') {\n            return {\n              v: children\n            };\n          }\n\n          if (type === 'string' || type === 'number') {\n            return {\n              v: children\n            };\n          }\n\n          var childrenArray = [];\n\n          var ret = _react2['default'].Children.map(children, function (c) {\n            var child = c;\n\n            if (_react2['default'].isValidElement(child)) {\n              if (child.type === _Validator2['default']) {\n                child = _react2['default'].cloneElement(child, {\n                  attachValidator: self.attachValidator,\n                  detachValidator: self.detachValidator,\n                  onInputChange: self.onInputChange,\n                  onInputChangeSilently: self.onInputChangeSilently\n                });\n              } else if (child.props) {\n                child = _react2['default'].cloneElement(child, {}, self.attachValidators(child.props.children));\n              }\n            }\n\n            childrenArray.push(child);\n            return child;\n          }); // if only one child, then flatten\n\n\n          if (childrenArray.length === 1) {\n            return {\n              v: childrenArray[0]\n            };\n          }\n\n          return {\n            v: ret\n          };\n        }();\n\n        if (typeof _ret === 'object') return _ret.v;\n      }\n\n      return children;\n    }\n  }, {\n    key: 'attachValidator',\n    value: function attachValidator(validator) {\n      var name = validator.getName();\n      this.validators[name] = validator;\n    }\n  }, {\n    key: 'detachValidator',\n    value: function detachValidator(validator) {\n      delete this.validators[validator.getName()];\n    }\n  }, {\n    key: 'forceValidate',\n    value: function forceValidate(fs, callback) {\n      var _this2 = this;\n\n      var fields = fs; // must async to allow state sync\n\n      setTimeout(function () {\n        var self = _this2;\n        var validators = _this2.validators;\n        var validator = undefined;\n        var doing = 0;\n        fields = fields || Object.keys(validators);\n        var count = fields.length;\n\n        if (count === 0) {\n          callback(self.isValid());\n          return;\n        }\n\n        function track() {\n          doing++;\n\n          if (doing === count) {\n            if (callback) {\n              callback(self.isValid());\n            }\n          }\n        }\n\n        fields.forEach(function (name) {\n          validator = validators[name];\n          self.onInputChange(validator, validator.getValue(), track);\n        });\n      }, 0);\n    }\n  }, {\n    key: 'validate',\n    value: function validate(callback) {\n      var _this3 = this;\n\n      var self = this;\n      var validators = this.validators;\n      var count = 0;\n      var validator = undefined;\n      var doing = 0;\n      Object.keys(validators).forEach(function (name) {\n        validator = validators[name];\n\n        if (validator.dirty) {\n          count++;\n        }\n      });\n\n      if (count === 0) {\n        callback(self.isValid());\n        return;\n      }\n\n      function track() {\n        doing++;\n\n        if (doing === count) {\n          callback(self.isValid());\n        }\n      }\n\n      Object.keys(validators).forEach(function (name) {\n        validator = validators[name];\n\n        if (validator.dirty) {\n          _this3.onInputChange(validator, validator.getValue(), track);\n        }\n      });\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      var validators = this.validators;\n      Object.keys(validators).forEach(function (name) {\n        validators[name].reset();\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react2['default'].createElement('div', {\n        className: this.props.className\n      }, this.attachValidators(this.props.children));\n    }\n  }]);\n\n  return Validation;\n}(_react2['default'].Component);\n\nValidation.propTypes = {\n  onChange: _react2['default'].PropTypes.func,\n  onValidate: _react2['default'].PropTypes.func,\n  className: _react2['default'].PropTypes.string,\n  children: _react2['default'].PropTypes.any\n};\nValidation.defaultProps = {\n  onValidate: function onValidate() {}\n};\nValidation.Validator = _Validator2['default'];\nValidation.FieldMixin = _FieldMixin2['default'];\nexports['default'] = Validation;\nmodule.exports = exports['default'];","map":{"version":3,"sources":["/home/sachin/Desktop/React/photography/node_modules/rc-form-validation/lib/Validation.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_get","get","_x","_x2","_x3","_again","_function","object","property","receiver","Function","desc","getOwnPropertyDescriptor","undefined","parent","getPrototypeOf","getter","call","_interopRequireDefault","obj","__esModule","_classCallCheck","instance","TypeError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_react","require","_react2","_asyncValidator","_asyncValidator2","_Validator","_Validator2","_objectAssign","_objectAssign2","_FieldMixin","_FieldMixin2","actionId","Validation","_React$Component","_this","validators","forEach","m","bind","onInputChangeSilently","validator","r","getValidateResult","formData","getName","onValidate","status","onInputChange","v","fn","name","schema","getSchema","rules","rule","index","transform","newRule","values","errors","isValidating","dirty","currentActionId","result","self","validate","nowValidator","ret","Array","isArray","concat","keys","map","e","message","getValue","isValid","every","attachValidators","children","_ret","type","childrenArray","Children","c","child","isValidElement","cloneElement","attachValidator","detachValidator","push","forceValidate","fs","callback","_this2","fields","setTimeout","doing","count","track","_this3","reset","render","createElement","className","Component","propTypes","onChange","PropTypes","func","string","any","defaultProps","Validator","FieldMixin","module"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _asyncValidator = require('async-validator');\n\nvar _asyncValidator2 = _interopRequireDefault(_asyncValidator);\n\nvar _Validator = require('./Validator');\n\nvar _Validator2 = _interopRequireDefault(_Validator);\n\nvar _objectAssign = require('object-assign');\n\nvar _objectAssign2 = _interopRequireDefault(_objectAssign);\n\nvar _FieldMixin = require('./FieldMixin');\n\nvar _FieldMixin2 = _interopRequireDefault(_FieldMixin);\n\nvar actionId = 0;\n\nvar Validation = (function (_React$Component) {\n  _inherits(Validation, _React$Component);\n\n  function Validation(props) {\n    var _this = this;\n\n    _classCallCheck(this, Validation);\n\n    _get(Object.getPrototypeOf(Validation.prototype), 'constructor', this).call(this, props);\n    this.validators = {};\n    ['attachValidator', 'detachValidator', 'onInputChange', 'onInputChangeSilently'].forEach(function (m) {\n      _this[m] = _this[m].bind(_this);\n    });\n  }\n\n  _createClass(Validation, [{\n    key: 'onInputChangeSilently',\n    value: function onInputChangeSilently(validator, value) {\n      var r = this.getValidateResult();\n      r.formData[validator.getName()] = value;\n      this.props.onValidate(r.status, r.formData);\n    }\n  }, {\n    key: 'onInputChange',\n    value: function onInputChange(validator, v, fn) {\n      var value = v;\n      var name = validator.getName();\n      var schema = this.getSchema(validator);\n      var rules = schema[name];\n      rules.forEach(function (rule, index) {\n        if (rule.transform) {\n          value = rule.transform(value);\n          var newRule = (0, _objectAssign2['default'])({}, rule);\n          newRule.transform = null;\n          rules[index] = newRule;\n        }\n      });\n      var values = {};\n      values[name] = value;\n      validator.errors = undefined;\n      validator.isValidating = true;\n      validator.dirty = true;\n      var currentActionId = actionId;\n      validator.actionId = currentActionId;\n      actionId++;\n      var result = this.getValidateResult();\n      result.formData[name] = value;\n      this.props.onValidate(result.status, result.formData);\n      var self = this;\n      new _asyncValidator2['default'](schema).validate(values, function (errors) {\n        var validators = self.validators;\n        // in case component is unmount and remount\n        var nowValidator = validators[name];\n        // prevent concurrency call\n        if (nowValidator && nowValidator.actionId === currentActionId) {\n          validator.errors = errors;\n          validator.isValidating = false;\n          validator.dirty = false;\n          var r = self.getValidateResult();\n          r.formData[name] = value;\n          self.props.onValidate(r.status, r.formData);\n          if (fn) {\n            fn();\n          }\n        }\n      });\n    }\n  }, {\n    key: 'getSchema',\n    value: function getSchema(validator) {\n      var ret = {};\n      var rules = validator.props.rules;\n      if (Array.isArray(rules)) {\n        rules = rules.concat();\n      } else {\n        rules = [rules];\n      }\n      ret[validator.getName()] = rules;\n      return ret;\n    }\n  }, {\n    key: 'getValidateResult',\n    value: function getValidateResult() {\n      var formData = {};\n      var status = {};\n      var validators = this.validators;\n      Object.keys(validators).forEach(function (name) {\n        var validator = validators[name];\n        var errors = undefined;\n        if (validator.errors) {\n          errors = validator.errors.map(function (e) {\n            return e.message;\n          });\n        }\n        if (errors && errors.length === 0) {\n          errors = null;\n        }\n        status[name] = {\n          errors: errors,\n          isValidating: validator.isValidating\n        };\n        formData[name] = validator.getValue();\n      });\n      return {\n        formData: formData,\n        status: status\n      };\n    }\n  }, {\n    key: 'isValid',\n    value: function isValid() {\n      var result = this.getValidateResult().status;\n      return Object.keys(result).every(function (name) {\n        if (result[name].isValidating || result[name].errors) {\n          return false;\n        }\n        return true;\n      });\n    }\n  }, {\n    key: 'attachValidators',\n    value: function attachValidators(children) {\n      var self = this;\n      if (children) {\n        var _ret = (function () {\n          // refer: React traverseAllChildrenImpl\n          // bug fix for react 0.13 @2015.07.02\n          // option should not have non-text children\n          // <option>11</option>\n          // React.Children.map(option.props.children,function(c){return c}) => {'.0':'11'}\n          var type = typeof children;\n          if (type === 'boolean') {\n            return {\n              v: children\n            };\n          }\n          if (type === 'string' || type === 'number') {\n            return {\n              v: children\n            };\n          }\n          var childrenArray = [];\n          var ret = _react2['default'].Children.map(children, function (c) {\n            var child = c;\n            if (_react2['default'].isValidElement(child)) {\n              if (child.type === _Validator2['default']) {\n                child = _react2['default'].cloneElement(child, {\n                  attachValidator: self.attachValidator,\n                  detachValidator: self.detachValidator,\n                  onInputChange: self.onInputChange,\n                  onInputChangeSilently: self.onInputChangeSilently\n                });\n              } else if (child.props) {\n                child = _react2['default'].cloneElement(child, {}, self.attachValidators(child.props.children));\n              }\n            }\n            childrenArray.push(child);\n            return child;\n          });\n          // if only one child, then flatten\n          if (childrenArray.length === 1) {\n            return {\n              v: childrenArray[0]\n            };\n          }\n          return {\n            v: ret\n          };\n        })();\n\n        if (typeof _ret === 'object') return _ret.v;\n      }\n      return children;\n    }\n  }, {\n    key: 'attachValidator',\n    value: function attachValidator(validator) {\n      var name = validator.getName();\n      this.validators[name] = validator;\n    }\n  }, {\n    key: 'detachValidator',\n    value: function detachValidator(validator) {\n      delete this.validators[validator.getName()];\n    }\n  }, {\n    key: 'forceValidate',\n    value: function forceValidate(fs, callback) {\n      var _this2 = this;\n\n      var fields = fs;\n      // must async to allow state sync\n      setTimeout(function () {\n        var self = _this2;\n        var validators = _this2.validators;\n        var validator = undefined;\n        var doing = 0;\n\n        fields = fields || Object.keys(validators);\n        var count = fields.length;\n        if (count === 0) {\n          callback(self.isValid());\n          return;\n        }\n\n        function track() {\n          doing++;\n          if (doing === count) {\n            if (callback) {\n              callback(self.isValid());\n            }\n          }\n        }\n\n        fields.forEach(function (name) {\n          validator = validators[name];\n          self.onInputChange(validator, validator.getValue(), track);\n        });\n      }, 0);\n    }\n  }, {\n    key: 'validate',\n    value: function validate(callback) {\n      var _this3 = this;\n\n      var self = this;\n      var validators = this.validators;\n      var count = 0;\n      var validator = undefined;\n      var doing = 0;\n\n      Object.keys(validators).forEach(function (name) {\n        validator = validators[name];\n        if (validator.dirty) {\n          count++;\n        }\n      });\n\n      if (count === 0) {\n        callback(self.isValid());\n        return;\n      }\n\n      function track() {\n        doing++;\n        if (doing === count) {\n          callback(self.isValid());\n        }\n      }\n\n      Object.keys(validators).forEach(function (name) {\n        validator = validators[name];\n        if (validator.dirty) {\n          _this3.onInputChange(validator, validator.getValue(), track);\n        }\n      });\n    }\n  }, {\n    key: 'reset',\n    value: function reset() {\n      var validators = this.validators;\n      Object.keys(validators).forEach(function (name) {\n        validators[name].reset();\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react2['default'].createElement(\n        'div',\n        { className: this.props.className },\n        this.attachValidators(this.props.children)\n      );\n    }\n  }]);\n\n  return Validation;\n})(_react2['default'].Component);\n\nValidation.propTypes = {\n  onChange: _react2['default'].PropTypes.func,\n  onValidate: _react2['default'].PropTypes.func,\n  className: _react2['default'].PropTypes.string,\n  children: _react2['default'].PropTypes.any\n};\n\nValidation.defaultProps = {\n  onValidate: function onValidate() {}\n};\n\nValidation.Validator = _Validator2['default'];\n\nValidation.FieldMixin = _FieldMixin2['default'];\n\nexports['default'] = Validation;\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}